<!doctype html>
<html lang="en">
<head>

    <!--Jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/test.css">

    <!--Sweet Alert-->
    <script src="js/sweetalert.min.js"></script>
    <link rel="stylesheet" href="css/sweetalert.css">
	
	<script src="js/signup.js"></script>
	<script src="js/login.js"></script>
	

    <script>		
        function getUserInfo(variable){
            var query = {};
            query['id'] = variable.replace(/\"/g, "");
            $.ajax({
                url:"/profile",
                type:'POST',
                data: JSON.stringify(query),
                dataType: 'text',
                success:  function(data) {
                    console.log(data);
                 }
                });
        }

        function userAuth(email, pass, callback){
            var query = {};
            query['user'] = email;
            query['pass'] = pass;

           $.ajax({
                url:"/auth",
                type:'POST',
                data: JSON.stringify(query),
                dataType: 'text',
                success:  function(data) {
                    callback(data);
                    getUserInfo(data);
                 },
                error: function(ts) {
                    alert(ts.responseText);
                 }
                });
        }

        function loginPopUp(){
            swal({
                title: "Please Login",
                text: "Email: <input id='email' type='text'><br>Password:<input id='password' type='password'>",
                html: true,
                showCancelButton:true,
                cancelButtonText: "Cancel",
                confirmButtonText: "Login",
                closeOnConfirm: false,
                showLoaderOnConfirm: true,
                allowOutsideClick: true,
                animation: true,
            },
            function(){
                var pass = document.getElementById('password').value;
                var email = document.getElementById('email').value;
                if(pass === "" || email === "") {
                    swal.showInputError("Please Enter Email and Password");
                    console.log("1");
                }
                userAuth(email, pass, function(data) {
                    console.log(data);
                    console.log(data.length);
                    if(data === "null"){
                        console.log("3");
                        setTimeout(function(){ swal({ title:"Login Error!", type: "error", timer: 1250, showConfirmButton: false }); }, 2500);
                    }
                    else {
                        console.log("2");
                        setTimeout(function(){ swal({ title:"Login Complete!", type: "success", timer: 1250, showConfirmButton: false }); }, 2000);
                    }
                });
            });
        }
        function search(){
                //var user = document.getElementById('user').value;
                //var billing = document.getElementById('billing').value;
                //var date = document.getElementById('date').value;
                var dog = document.getElementById('dog').value;
                bookAuth( dog, function(data) {
                    console.log(data);
                    console.log(data.length);
                    if(data === "null"){
                        setTimeout(function(){ swal({ title:"Search Error!", type: "error", timer: 1250, showConfirmButton: false }); }, 2500);
                    }
                    else {
                        setTimeout(function(){ swal({ title:"Search Complete!", type: "success", timer: 1250, showConfirmButton: false }); }, 2000);
                    }
                });
        }
        function searchAuth(start, end, dog, callback){
            var query = {};
            query['start'] = start;
            query['end'] = end;
            query['dog'] = dog;
            //query['user'] = user;
            //query['bill'] = billing;
            console.log(query['start']);
            console.log(query['dog']);
           $.ajax({
                url:"/search",
                type:'POST',
                data: JSON.stringify(query),
                dataType: 'text',
                success:  function(data) {
                    callback(data);
                 },
                error: function(ts) {
                    alert(ts.responseText);
                 }
                });
        }
    </script>

</head>

<body>
<div class="topnav" id="NavBar">
    <a href="index.html">Home</a>
    <a href="#" onclick="window.location.href='profile.html'">Profile</a>
    <a href="pups.html" onclick="window.location.href='pups.html'">Meet The Pups!</a>
    <a href="#" onclick="login();">Login</a>

    
    <div class="container" id="search">
    <div class="row">
        <div class="col-md-12 input-group" id="adv-search">
            <input type="text" class="form-control" placeholder="Search for a pup!" />
            <div class="input-group-btn">
                <div class="btn-group" role="group">
                    <div class="dropdown dropdown-lg">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
                        <div class="dropdown-menu dropdown-menu-right" role="menu">
                            <form class="form-horizontal" role="form">
                            
                              <div class="form-group">
                                <label for="filter">Dog Name</label>
                                <select class="form-control">
                                    <option>Max</option>
                                    <option>Elias</option>
                                    <option>Calvin</option>
                                    <option>Callie</option>
                                </select>
                              </div>
                              
                                <div class="form-group">
                                <label for="contain">Select Date and Time</label>
                                      <div class="col-10">
                                        <input class="form-control" type="datetime-local" id="start">
                                      </div>    
                                </div>                        
                                
                              <!--<button type="submit" onclick="search();" class="btn btn-primary"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>-->
                              
                              <div class="form-group">
                                <label for="something">Enter Something Else</label>
                                <input type="text" class="form-control" id="idk" placeholder="something here">
                              </div>
                              
                              
                            </form>                         
                        </div>
                    </div>
                    <button type="button" onclick="search();" class="btn btn-primary"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                </div>
            </div>
          </div>
        </div>
    </div>
</div>
	
	
	
	
</div>

<img src="img/logo.png" style="width: 15%; height: 15%" alt="Rent-a-Pup logo"/>
<img src="img/a.jpg" style="width: 40%; height: 40%" alt="Pup"/>
<button type="button" href="book.html" onclick="window.location.href='book.html'" class="btn btn-primary" >Book Now!</button>
 









</body>
</html>
