<!doctype html>
<html lang="en">
<head>
        
    <!--Jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
            
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
                
    <!--Sweet Alert-->
    <script src="js/sweetalert.min.js"></script>
    <link rel="stylesheet" href="css/sweetalert.css">

    <script>
		
		function userAuth(email, pass, callback){
			var query = {};
			query['user'] = email;
			query['pass'] = pass;

           $.ajax({
				url:"/test",
				type:'POST',
				data: JSON.stringify(query),
				dataType: 'text',
				success:  function(data) { 
					callback(data);
				 },
				error: function(ts) { 
					alert(ts.responseText);
				 }
				});
		}
            
        function loginPopUp(){
			swal({
				title: "Please Login",
				text: "Email: <input id='email' type='text'><br>Password:<input id='password' type='password'>",
				html: true,
				showCancelButton:true,
				cancelButtonText: "Cancel",
				confirmButtonText: "Login",
				closeOnConfirm: false,
				showLoaderOnConfirm: true,
				allowOutsideClick: true,
				animation: true,
			},
			function(){
				var pass = document.getElementById('password').value;
				var email = document.getElementById('email').value;
                if(pass === "" || email === "") {
                    swal.showInputError("Please Enter Email and Password");
                    console.log("1");
                }
				userAuth(email, pass, function(data) {
					console.log(data);
					console.log(data.length);
		            if(data === "null"){
                        console.log("3");
						setTimeout(function(){ swal({ title:"Login Error!", type: "error", timer: 1250, showConfirmButton: false }); }, 2000);
					}
					else {
						console.log("2");
						setTimeout(function(){ swal({ title:"Login Complete!", type: "success", timer: 1250, showConfirmButton: false }); }, 2000);
					}
				});
			});
		}
        
    </script>
                               
</head>
    
<body>        
    <div class="topnav" id="NavBar">
        <a href="#home">Home</a>
        <a href="#login" style="text-align:right;" onclick="loginPopUp();">Login</a>
        <a href="#about" onclick="window.location.href='about.html'">About</a>
    </div>

    <img src="img/logo.png" style="width: 25%; height: 25%" alt="Rent-a-Pup logo"/> 
</body>
</html>
